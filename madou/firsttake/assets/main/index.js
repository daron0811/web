System.register("chunks:///_virtual/FaceAR.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e,t){var r,n,i,a,s,o,c,u,p,l,h,d,f;return{setters:[function(e){r=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,a=e.assertThisInitialized,s=e.asyncToGenerator,o=e.regeneratorRuntime,c=e.createForOfIteratorHelperLoose},function(e){u=e.cclegacy,p=e._decorator,l=e.Node,h=e.view,d=e.Vec3,f=e.Component}],execute:function(){var m,v,g,_,k,b,w,x,y,F,C;u._RF.push({},"4d52aClhQVA6ozEhRqocln4","FaceAR",void 0);var M=p.ccclass,R=p.property;e("FaceAR",(m=M("FaceAR"),v=R({type:l,tooltip:"2D 貼圖節點（例如鼻子/眼鏡）"}),g=R({tooltip:"偵測 FPS（手機建議 10~15）"}),_=R({tooltip:"前鏡頭是否鏡像（影響貼圖 X 座標）"}),m((w=r((b=function(e){function r(){for(var t,r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return t=e.call.apply(e,[this].concat(n))||this,i(t,"stickerNode",w,a(t)),i(t,"targetFps",x,a(t)),i(t,"cameraWidth",y,a(t)),i(t,"cameraHeight",F,a(t)),i(t,"mirrorUserCamera",C,a(t)),t._video=null,t._running=!1,t._faceLandmarker=null,t._lastTime=0,t._intervalMs=1e3/15,t._facingMode="user",t._starting=!1,t}n(r,e);var u=r.prototype;return u.onStartClicked=function(){var e=s(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._running&&!this._starting){e.next=2;break}return e.abrupt("return");case 2:return this._starting=!0,e.prev=3,e.next=6,this.init();case 6:this._running=!0,e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),console.error("[FaceAR] init failed",e.t0);case 12:return e.prev=12,this._starting=!1,e.finish(12);case 15:case"end":return e.stop()}}),e,this,[[3,9,12,15]])})));return function(){return e.apply(this,arguments)}}(),u.onToggleCameraClicked=function(){var e=s(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._running&&!this._starting){e.next=2;break}return e.abrupt("return");case 2:return this._facingMode="user"===this._facingMode?"environment":"user",this._starting=!0,e.prev=4,e.next=7,this.restartCameraStream();case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(4),console.error("[FaceAR] toggle camera failed",e.t0);case 12:return e.prev=12,this._starting=!1,e.finish(12);case 15:case"end":return e.stop()}}),e,this,[[4,9,12,15]])})));return function(){return e.apply(this,arguments)}}(),u.init=function(){var e=s(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._intervalMs=1e3/Math.max(1,this.targetFps),e.next=3,this.setupOrRestartCamera();case 3:if(this._faceLandmarker){e.next=6;break}return e.next=6,this.setupMediapipe();case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),u.restartCameraStream=function(){var e=s(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.setupOrRestartCamera(!0);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),u.setupOrRestartCamera=function(){var e=s(o().mark((function e(t){var r,n,i,a,s=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t&&(t=!1),null!=(r=navigator.mediaDevices)&&r.getUserMedia){e.next=3;break}throw new Error("此瀏覽器不支援 getUserMedia");case 3:return t&&this.stopCamera(),this._video||((n=document.createElement("video")).autoplay=!0,n.muted=!0,n.playsInline=!0,n.playsInline=!0,n.style.position="fixed",n.style.left="-9999px",n.style.top="0",n.width=this.cameraWidth,n.height=this.cameraHeight,document.body.appendChild(n),this._video=n),i={video:{facingMode:this._facingMode,width:{ideal:this.cameraWidth},height:{ideal:this.cameraHeight}},audio:!1},e.next=8,navigator.mediaDevices.getUserMedia(i);case 8:return a=e.sent,this._video.srcObject=a,e.next=12,new Promise((function(e){s._video.onloadedmetadata=function(){return e()}}));case 12:return e.next=14,this._video.play().catch((function(){}));case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),u.setupMediapipe=function(){var e=s(o().mark((function e(){var t,r,n,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.importWithFallback(["https://cdn.jsdelivr.net/npm/@mediapipe/tasks-vision/vision_bundle.mjs","https://unpkg.com/@mediapipe/tasks-vision/vision_bundle.mjs"]);case 2:return t=e.sent,r=t.FaceLandmarker,n=t.FilesetResolver,e.next=6,n.forVisionTasks("https://cdn.jsdelivr.net/npm/@mediapipe/tasks-vision@latest/wasm");case 6:return i=e.sent,"https://storage.googleapis.com/mediapipe-models/face_landmarker/face_landmarker/float16/1/face_landmarker.task",e.next=10,r.createFromOptions(i,{baseOptions:{modelAssetPath:"https://storage.googleapis.com/mediapipe-models/face_landmarker/face_landmarker/float16/1/face_landmarker.task"},runningMode:"VIDEO",numFaces:1,outputFaceBlendshapes:!1,outputFacialTransformationMatrixes:!1});case 10:this._faceLandmarker=e.sent;case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),u.importWithFallback=function(){var e=s(o().mark((function e(r){var n,i,a,s;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=c(r);case 1:if((i=n()).done){e.next=16;break}return a=i.value,e.prev=3,e.next=6,t.import(a);case 6:return s=e.sent,console.log("[FaceAR] imported:",a),e.abrupt("return",s);case 11:e.prev=11,e.t0=e.catch(3),console.warn("[FaceAR] import failed:",a,e.t0);case 14:e.next=1;break;case 16:throw new Error("所有 MediaPipe CDN 載入失敗（ESM import）");case 17:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(t){return e.apply(this,arguments)}}(),u.update=function(){var e;if(this._running&&this._video&&this._faceLandmarker&&this.stickerNode){var t=performance.now();if(!(t-this._lastTime<this._intervalMs)){this._lastTime=t;var r=this._faceLandmarker.detectForVideo(this._video,t),n=null==r||null==(e=r.faceLandmarks)?void 0:e[0];if(n){var i=n[1];if(i){var a=h.getVisibleSize(),s=((this.mirrorUserCamera&&"user"===this._facingMode?1-i.x:i.x)-.5)*a.width,o=(.5-i.y)*a.height;this.stickerNode.setPosition(new d(s,o,0))}}}}},u.stopCamera=function(){var e;if(this._video){var t=this._video.srcObject;null==t||null==(e=t.getTracks())||e.forEach((function(e){return e.stop()})),this._video.srcObject=null}},u.loadScript=function(e){return new Promise((function(t,r){var n=document.createElement("script");n.src=e,n.async=!0,n.onload=function(){return t()},n.onerror=function(){return r(new Error("載入失敗: "+e))},document.head.appendChild(n)}))},u.onDestroy=function(){var e;this._running=!1,this.stopCamera(),null!=(e=this._video)&&e.parentElement&&this._video.parentElement.removeChild(this._video),this._video=null},r}(f)).prototype,"stickerNode",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=r(b.prototype,"targetFps",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 15}}),y=r(b.prototype,"cameraWidth",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 640}}),F=r(b.prototype,"cameraHeight",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 480}}),C=r(b.prototype,"mirrorUserCamera",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),k=b))||k));u._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./MainManager.ts","./QuizManager.ts","./WebcamFullHeight.ts","./WebcamSpriteMask.ts","./WebcamTexture.ts","./FaceAR.ts"],(function(){return{setters:[null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/MainManager.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(n){var t,e,a,r,i;return{setters:[function(n){t=n.inheritsLoose,e=n.createClass},function(n){a=n.cclegacy,r=n._decorator,i=n.Component}],execute:function(){var c,o;a._RF.push({},"240783QuM1C8pu/qEqU8s9A","MainManager",void 0);var s=r.ccclass;r.property,n("MainManager",s("MainManager")(((o=function(n){function a(){return n.apply(this,arguments)||this}t(a,n);var r=a.prototype;return r.start=function(){},r.update=function(n){},e(a,null,[{key:"instance",get:function(){return this._instance||console.warn("MainGame 還沒有被綁定到 Node 上！"),this._instance}}]),a}(i))._instance=null,c=o))||c);a._RF.pop()}}}));

System.register("chunks:///_virtual/QuizManager.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,i,n,r,s,l,o,a,u;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){s=t.cclegacy,l=t._decorator,o=t.Label,a=t.Node,u=t.Component}],execute:function(){var c,p,h,b,d,f,g,L,x,v,w,y,_,z,Q;s._RF.push({},"34530+z/RJByL2nJOR528Y2","QuizManager",void 0);var I=l.ccclass,m=l.property,q=[{id:"1",title:"Q1｜此刻你的「能量 × 感受」最接近哪一格？",question:"請依照此刻的感覺作答；沒有標準答案。",options:[{id:"A",text:"高能量 × 不舒服（焦躁、緊張）"},{id:"B",text:"高能量 × 舒服（興奮、期待）"},{id:"C",text:"低能量 × 不舒服（沮喪、疲倦）"},{id:"D",text:"低能量 × 舒服（平靜、放鬆）"}]},{id:"2",title:"Q2｜此刻你最明顯的身體訊號是？",question:"",options:[{id:"A",text:"心跳偏快／手心出汗"},{id:"B",text:"肩頸僵硬／下顎緊繃"},{id:"C",text:"呼吸變淺／胸口發緊"},{id:"D",text:"胃部不適／全身沈重"}]},{id:"3",title:"Q3｜此刻你最需要哪一種支持？",question:"",options:[{id:"A",text:"先穩定身體感受（呼吸放鬆）"},{id:"B",text:"把事情排出來（訂下行動步驟）"},{id:"C",text:"有人支持著我／靠著一下（被支持感）"},{id:"D",text:"一個調整與自我修復的空間"}]}];t("QuizManager",(c=I("QuizManager"),p=m(o),h=m(o),b=m([o]),d=m(o),f=m(a),g=m(o),c((v=e((x=function(t){function e(){for(var e,i=arguments.length,s=new Array(i),l=0;l<i;l++)s[l]=arguments[l];return e=t.call.apply(t,[this].concat(s))||this,n(e,"titleLabel",v,r(e)),n(e,"questionLabel",w,r(e)),n(e,"optionLabels",y,r(e)),n(e,"progressLabel",_,r(e)),n(e,"resultPanel",z,r(e)),n(e,"resultLabel",Q,r(e)),e._currentIndex=0,e._answers={},e}i(e,t);var s=e.prototype;return s.start=function(){this._currentIndex=0,this._answers={},this.resultPanel&&(this.resultPanel.active=!1),this.showCurrentQuestion()},s.showCurrentQuestion=function(){var t=q[this._currentIndex];if(t){this.titleLabel&&(this.titleLabel.string=t.title),this.questionLabel&&(this.questionLabel.string=t.question||"");for(var e=0;e<this.optionLabels.length;e++){var i=this.optionLabels[e],n=t.options[e];i&&n&&(i.string=n.id+". "+n.text)}this.progressLabel&&(this.progressLabel.string=this._currentIndex+1+" / "+q.length)}},s.onClickOptionButton=function(t,e){var i=parseInt(e,10),n=q[this._currentIndex];if(n){var r=n.options[i];r&&(this._answers[n.id]=r.id,this._currentIndex<q.length-1?(this._currentIndex++,this.showCurrentQuestion()):this.showResult())}},s.showResult=function(){for(var t="你的作答結果：\n\n",e=0,i=q;e<i.length;e++){var n=i[e],r=this._answers[n.id]||"-";t+=n.id+"：選擇 "+r+"\n"}this.resultLabel&&(this.resultLabel.string=t),this.resultPanel&&(this.resultPanel.active=!0)},e}(u)).prototype,"titleLabel",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=e(x.prototype,"questionLabel",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=e(x.prototype,"optionLabels",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),_=e(x.prototype,"progressLabel",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=e(x.prototype,"resultPanel",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Q=e(x.prototype,"resultLabel",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=x))||L));s._RF.pop()}}}));

System.register("chunks:///_virtual/WebcamFullHeight.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,i,o,r,s,n,a;return{setters:[function(e){t=e.inheritsLoose,i=e.asyncToGenerator,o=e.regeneratorRuntime},function(e){r=e.cclegacy,s=e._decorator,n=e.Component,a=e.game}],execute:function(){var c;r._RF.push({},"d032bsCiIBDu73dUAUZVjod","WebcamFullHeight",void 0);var u=s.ccclass;e("WebcamFullHeight",u("WebcamFullHeight")(c=function(e){function r(){for(var t,i=arguments.length,o=new Array(i),r=0;r<i;r++)o[r]=arguments[r];return(t=e.call.apply(e,[this].concat(o))||this).video=void 0,t}t(r,e);var s=r.prototype;return s.onLoad=function(){this.setupWebcam()},s.setupWebcam=function(){var e=i(o().mark((function e(){var t,i,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.canvas,i=t.parentElement){e.next=5;break}return console.error("找不到 Cocos canvas 的父節點"),e.abrupt("return");case 5:return this.video=document.createElement("video"),this.video.setAttribute("playsinline","true"),this.video.autoplay=!0,this.video.muted=!0,this.video.style.position="absolute",this.video.style.top="50%",this.video.style.left="50%",this.video.style.height="100%",this.video.style.width="auto",this.video.style.transform="translate(-50%, -50%)",this.video.style.objectFit="cover",i.style.position="relative",i.style.overflow="hidden",i.appendChild(this.video),e.prev=19,e.next=22,navigator.mediaDevices.getUserMedia({video:{facingMode:"user"},audio:!1});case 22:r=e.sent,this.video.srcObject=r,e.next=29;break;case 26:e.prev=26,e.t0=e.catch(19),console.error("取得 webcam 失敗：",e.t0);case 29:case"end":return e.stop()}}),e,this,[[19,26]])})));return function(){return e.apply(this,arguments)}}(),s.onDestroy=function(){var e;this.video&&this.video.srcObject&&this.video.srcObject.getTracks().forEach((function(e){return e.stop()}));null==(e=this.video)||e.remove()},r}(n))||c);r._RF.pop()}}}));

System.register("chunks:///_virtual/WebcamSpriteMask.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,i,s,r,n,a,o,c,h,u,p,d,v;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,s=e.initializerDefineProperty,r=e.assertThisInitialized,n=e.asyncToGenerator,a=e.regeneratorRuntime},function(e){o=e.cclegacy,c=e._decorator,h=e.Sprite,u=e.Texture2D,p=e.SpriteFrame,d=e.UITransform,v=e.Component}],execute:function(){var l,f,m,x,g;o._RF.push({},"5431eCjxEJGbZ+OMaFGYcSO","WebcamSpriteMask",void 0);var b=c.ccclass,y=c.property;e("WebcamSpriteMask",(l=b("WebcamSpriteMask"),f=y(h),l((g=t((x=function(e){function t(){for(var t,i=arguments.length,n=new Array(i),a=0;a<i;a++)n[a]=arguments[a];return t=e.call.apply(e,[this].concat(n))||this,s(t,"sprite",g,r(t)),t.video=null,t.offscreenCanvas=null,t.ctx=null,t.texture=null,t.spriteFrame=null,t.isReady=!1,t}i(t,e);var o=t.prototype;return o.onLoad=function(){this.sprite||(this.sprite=this.getComponent(h)),this.initWebcam()},o.initWebcam=function(){var e=n(a().mark((function e(){var t,i=this;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.video=document.createElement("video"),this.video.autoplay=!0,this.video.muted=!0,this.video.setAttribute("playsinline","true"),e.prev=4,e.next=7,navigator.mediaDevices.getUserMedia({video:{facingMode:"user"},audio:!1});case 7:t=e.sent,this.video.srcObject=t,this.video.onloadedmetadata=function(){i.setupCanvasAndTexture()},e.next=15;break;case 12:e.prev=12,e.t0=e.catch(4),console.error("取得 webcam 失敗：",e.t0);case 15:case"end":return e.stop()}}),e,this,[[4,12]])})));return function(){return e.apply(this,arguments)}}(),o.setupCanvasAndTexture=function(){if(this.video&&this.sprite){var e=this.video.videoWidth||640,t=this.video.videoHeight||480;this.offscreenCanvas=document.createElement("canvas"),this.offscreenCanvas.width=e,this.offscreenCanvas.height=t,this.ctx=this.offscreenCanvas.getContext("2d"),this.texture=new u,this.texture.reset({width:e,height:t}),this.spriteFrame=new p,this.spriteFrame.texture=this.texture,this.sprite.spriteFrame=this.spriteFrame;var i=this.sprite.node.getComponent(d);if(i){var s=i.height/t;this.sprite.node.setScale(s,s,1)}this.isReady=!0}},o.update=function(){this.isReady&&this.ctx&&this.offscreenCanvas&&this.video&&this.texture&&(this.ctx.drawImage(this.video,0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),this.texture.uploadData(this.offscreenCanvas))},o.onDestroy=function(){this.video&&this.video.srcObject&&this.video.srcObject.getTracks().forEach((function(e){return e.stop()}));this.video=null,this.offscreenCanvas=null,this.ctx=null},t}(v)).prototype,"sprite",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=x))||m));o._RF.pop()}}}));

System.register("chunks:///_virtual/WebcamTexture.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,i,n,r,s,a,o,h,u,c,d,l,v,_,p,f;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,r=e.assertThisInitialized,s=e.asyncToGenerator,a=e.regeneratorRuntime},function(e){o=e.cclegacy,h=e._decorator,u=e.Sprite,c=e.UITransform,d=e.view,l=e.Node,v=e.Component,_=e.Texture2D,p=e.SpriteFrame,f=e.sys}],execute:function(){var m,w,g,b,x;o._RF.push({},"d49c7Zd/PNL045sIQykro9L","WebcamTexture",void 0);var y=h.ccclass,S=h.property;e("WebcamTexture",(m=y("WebcamTexture"),w=S({type:u,tooltip:"用來顯示相機畫面的 Sprite"}),m((x=t((b=function(e){function t(){for(var t,i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return t=e.call.apply(e,[this].concat(s))||this,n(t,"cameraSprite",x,r(t)),t._video=null,t._canvas=null,t._ctx=null,t._texture=null,t._ready=!1,t._resizeRAF=0,t._parentSizeChangedCb=null,t._ro=null,t.queueReflow=function(){t._resizeRAF||(t._resizeRAF=requestAnimationFrame((function(){t._resizeRAF=0,t.reflow()})))},t}i(t,e);var o=t.prototype;return o.onLoad=function(){var e=s(a().mark((function e(){var t,i,n,r,s=this;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(f.isBrowser){e.next=3;break}return console.warn("WebcamTexture 只支援 Web 平台"),e.abrupt("return");case 3:if(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia){e.next=6;break}return console.warn("此瀏覽器不支援 getUserMedia"),e.abrupt("return");case 6:return this._video=document.createElement("video"),this._video.setAttribute("autoplay",""),this._video.setAttribute("muted",""),this._video.setAttribute("playsinline",""),this._canvas=document.createElement("canvas"),this._ctx=this._canvas.getContext("2d"),this._canvas.style.display="none",document.body.appendChild(this._canvas),e.prev=14,e.next=17,navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"},audio:!1});case 17:return t=e.sent,this._video.srcObject=t,e.next=21,new Promise((function(e){s._video.onloadedmetadata=function(){s._video.play(),e()}}));case 21:i=this._video.videoWidth||640,n=this._video.videoHeight||480,this._canvas.width=i,this._canvas.height=n,this._texture=new _,this._texture.reset({width:i,height:n,format:_.PixelFormat.RGB888}),(r=new p).texture=this._texture,this.cameraSprite&&(this.cameraSprite.spriteFrame=r),this.fitSpriteToParentHeight(n),this._ready=!0,this.setupResizeListeners(),e.next=38;break;case 35:e.prev=35,e.t0=e.catch(14),console.error("無法取得攝影機：",e.t0);case 38:case"end":return e.stop()}}),e,this,[[14,35]])})));return function(){return e.apply(this,arguments)}}(),o.fitSpriteToParentHeight=function(e){if(this.cameraSprite){var t=this.cameraSprite.node,i=t.getComponent(c),n=t.parent;if(i&&n){var r=n.getComponent(c);if(r){i.setContentSize(i.width,e);var s=r.height/e;t.setScale(s,s,1),i.anchorX=.5,i.anchorY=.5}}}},o.setupResizeListeners=function(){var e,t;window.addEventListener("resize",this.queueReflow),window.addEventListener("orientationchange",this.queueReflow),null==d||null==d.on||d.on("canvas-resize",this.queueReflow,this);var i=null==(e=this.cameraSprite)?void 0:e.node.parent;i&&(this._parentSizeChangedCb=this.queueReflow.bind(this),i.on(l.EventType.SIZE_CHANGED,this._parentSizeChangedCb,this)),null==(t=this._video)||t.addEventListener("resize",this.queueReflow);var n=document.getElementById("stage-9x16");n&&"ResizeObserver"in window&&(this._ro=new ResizeObserver(this.queueReflow),this._ro.observe(n)),this.queueReflow()},o.reflow=function(){if(this._ready&&this.cameraSprite&&this._video){var e=this._video.videoHeight||480;this.fitSpriteToParentHeight(e)}},o.update=function(){this._ready&&this._video&&this._canvas&&this._ctx&&this._texture&&(this._ctx.drawImage(this._video,0,0,this._canvas.width,this._canvas.height),this._texture.uploadData(this._canvas))},o.onDestroy=function(){var e,t;this._video&&this._video.srcObject&&this._video.srcObject.getTracks().forEach((function(e){return e.stop()}));this._canvas&&this._canvas.parentNode&&this._canvas.parentNode.removeChild(this._canvas),window.removeEventListener("resize",this.queueReflow),window.removeEventListener("orientationchange",this.queueReflow),null==d||null==d.off||d.off("canvas-resize",this.queueReflow,this),null==(e=this._video)||e.removeEventListener("resize",this.queueReflow);var i=null==(t=this.cameraSprite)?void 0:t.node.parent;i&&this._parentSizeChangedCb&&(i.off(l.EventType.SIZE_CHANGED,this._parentSizeChangedCb,this),this._parentSizeChangedCb=null),this._ro&&(this._ro.disconnect(),this._ro=null),this._video=null,this._canvas=null,this._ctx=null,this._texture=null},t}(v)).prototype,"cameraSprite",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=b))||g));o._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});
System.register("chunks:///_virtual/AccelExample.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,n,i,r,s,o,a,c,l,u,h,p,f;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,r=e.assertThisInitialized,s=e.asyncToGenerator,o=e.regeneratorRuntime},function(e){a=e.cclegacy,c=e._decorator,l=e.Label,u=e.Button,h=e.input,p=e.Input,f=e.Component}],execute:function(){var b,d,v,g,m,y,_,E,k;a._RF.push({},"d775aebNcVA5pYycYV2tsw2","AccelExample",void 0);var x=c.ccclass,A=c.property;e("AccelExample",(b=x("AccelExample"),d=A(l),v=A(u),b((y=t((m=function(e){function t(){for(var t,n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return t=e.call.apply(e,[this].concat(s))||this,i(t,"infoLabel",y,r(t)),i(t,"button",_,r(t)),i(t,"shakeThreshold",E,r(t)),i(t,"shakeDebounceMs",k,r(t)),t._lastShakeAt=0,t._lastVec={x:0,y:0,z:0},t._started=!1,t}n(t,e);var a=t.prototype;return a.onLoad=function(){this.startAccelerometer(),this.button.node.on(u.EventType.CLICK,this.requestIOSPermission,this)},a.onEnable=function(){h.on(p.EventType.DEVICEMOTION,this.onAccel,this)},a.onDisable=function(){h.off(p.EventType.DEVICEMOTION,this.onAccel,this),h.setAccelerometerEnabled(!1),this._started=!1},a.startAccelerometer=function(){var e=s(o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=void 0!==window.DeviceMotionEvent&&"function"==typeof DeviceMotionEvent.requestPermission,this.button.node.active=t,!t){e.next=5;break}return this.log("⚠️ iOS 需要使用者手勢授權，請在按鈕點擊時呼叫 requestIOSPermission()。"),e.abrupt("return");case 5:h.setAccelerometerEnabled(!0),this._started=!0,this.log("✅ 加速度計已啟用（非 iOS 權限模式）。");case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),a.requestIOSPermission=function(){var e=s(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,DeviceMotionEvent.requestPermission();case 3:"granted"===e.sent?(h.setAccelerometerEnabled(!0),this._started=!0,this.log("✅ 已取得 iOS 權限並啟用加速度計。")):this.log("❌ 使用者拒絕了加速度計權限。"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),this.log("❌ 請求 iOS 權限發生錯誤："+e.t0.message);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),a.onAccel=function(e){var t=e.acc,n=t.x,i=t.y,r=t.z;this.setLabel("acc(m/s^2)\nX: "+n.toFixed(2)+"\nY: "+i.toFixed(2)+"\nZ: "+r.toFixed(2)+"\n"+(this._started?"running":"stopped"));var s=n-this._lastVec.x,o=i-this._lastVec.y,a=r-this._lastVec.z,c=Math.sqrt(s*s+o*o+a*a),l=Date.now();c>this.shakeThreshold&&l-this._lastShakeAt>this.shakeDebounceMs&&(this._lastShakeAt=l,this.onShake()),this._lastVec.x=n,this._lastVec.y=i,this._lastVec.z=r},a.onShake=function(){this.log("🎉 Shake detected!")},a.setLabel=function(e){this.infoLabel&&(this.infoLabel.string=e),console.log(e)},a.log=function(e){this.infoLabel&&(this.infoLabel.string=e+(this.infoLabel.string?"\n\n"+this.infoLabel.string:"")),console.log(e)},t}(f)).prototype,"infoLabel",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=t(m.prototype,"button",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=t(m.prototype,"shakeThreshold",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 12}}),k=t(m.prototype,"shakeDebounceMs",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 800}}),g=m))||g));a._RF.pop()}}}));

System.register("chunks:///_virtual/AudioManager.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var i,r,o,t,n,u,s,c,l,a,p;return{setters:[function(e){i=e.applyDecoratedDescriptor,r=e.inheritsLoose,o=e.initializerDefineProperty,t=e.assertThisInitialized},function(e){n=e.cclegacy,u=e._decorator,s=e.AudioSource,c=e.AudioClip,l=e.warn,a=e.error,p=e.Component}],execute:function(){var g,h,d,S,m,f,b,y,v,x,A,M;n._RF.push({},"7cdd18cO+lAX7vdh1eHkqxQ","AudioManager",void 0);var _=u.ccclass,B=u.property;e("AudioManager",(g=_("AudioManager"),h=B({type:s}),d=B({type:s}),S=B({type:[c]}),m=B({type:[c]}),g(((M=function(e){function i(){for(var i,r=arguments.length,n=new Array(r),u=0;u<r;u++)n[u]=arguments[u];return i=e.call.apply(e,[this].concat(n))||this,o(i,"sfxSource",y,t(i)),o(i,"bgmSource",v,t(i)),o(i,"sfxClips",x,t(i)),o(i,"bgmClips",A,t(i)),i._currentBgmIndex=-1,i}r(i,e);var n=i.prototype;return n.onLoad=function(){if(i.Inst&&i.Inst!==this)return l("[AudioManager] Duplicate instance, destroying this one."),void this.node.destroy();i.Inst=this,this.sfxSource||(this.sfxSource=this._ensureAudioSource(this.node,"SFXSource")),this.bgmSource||(this.bgmSource=this._ensureAudioSource(this.node,"BGMSource"),this.bgmSource.loop=!0)},n.playBGM=function(e,i,r){if(void 0===i&&(i=!0),void 0===r&&(r=1),this.bgmSource){var o=this._getFrom(this.bgmClips,e,"BGM");o&&(this._currentBgmIndex===e&&this.bgmSource.playing||(this._currentBgmIndex=e,this.bgmSource.loop=i,this.bgmSource.volume=r,this.bgmSource.clip=o,this.bgmSource.play()))}else a("[AudioManager] bgmSource is null")},n.stopBGM=function(){this.bgmSource&&(this.bgmSource.stop(),this._currentBgmIndex=-1)},n.playSFXOnce=function(e,i){if(void 0===i&&(i=1),this.sfxSource){var r=this._getFrom(this.sfxClips,e,"SFX");r&&this.sfxSource.playOneShot(r,i)}else a("[AudioManager] sfxSource is null")},n.playBGMClip=function(e,i,r){void 0===i&&(i=!0),void 0===r&&(r=1),this.bgmSource?e?(this._currentBgmIndex=-1,this.bgmSource.loop=i,this.bgmSource.volume=r,this.bgmSource.clip=e,this.bgmSource.play()):l("[AudioManager] Invalid BGM clip"):a("[AudioManager] bgmSource is null")},n.playSFXClip=function(e,i){void 0===i&&(i=1),this.sfxSource?e?this.sfxSource.playOneShot(e,i):l("[AudioManager] Invalid SFX clip"):a("[AudioManager] sfxSource is null")},n._ensureAudioSource=function(e,i){var r=e.getComponent(s);return r||(r=e.addComponent(s)),r},n._getFrom=function(e,i,r){return e&&0!==e.length?i<0||i>=e.length?(l("[AudioManager] "+r+" index out of range: "+i+". (0 ~ "+(e.length-1)+")"),null):e[i]:(l("[AudioManager] "+r+" clips list is empty."),null)},i}(p)).Inst=null,y=i((b=M).prototype,"sfxSource",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=i(b.prototype,"bgmSource",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=i(b.prototype,"sfxClips",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),A=i(b.prototype,"bgmClips",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),f=b))||f));n._RF.pop()}}}));

System.register("chunks:///_virtual/BGScroller.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,i,n,r,o,u,a,s,c;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){o=e.cclegacy,u=e._decorator,a=e.Vec3,s=e.tween,c=e.Component}],execute:function(){var l,p,f,h,d,v,w,b,y;o._RF.push({},"8bdcdLrzjVBKae+/RHerkR5","BGScroller",void 0);var g=u.ccclass,S=u.property;e("BGScroller",(l=g("BGScroller"),p=S({type:Number}),f=S({type:Number}),l((v=t((d=function(e){function t(){for(var t,i=arguments.length,o=new Array(i),u=0;u<i;u++)o[u]=arguments[u];return t=e.call.apply(e,[this].concat(o))||this,n(t,"leftSide",v,r(t)),n(t,"rightSide",w,r(t)),n(t,"duration",b,r(t)),n(t,"isMove",y,r(t)),t.tweener=void 0,t}i(t,e);var o=t.prototype;return o.start=function(){},o.onEnable=function(){this.isMove=!1},o.StartMove=function(){this.isMove=!0,this.moveTween()},o.moveTween=function(){var e=this;this.node.setPosition(new a(this.rightSide,0,0)),this.tweener=s(this.node).to(this.duration,{position:new a(this.leftSide,0,0)}).start().call((function(){e.isMove&&e.moveTween()}))},o.PauseTween=function(){this.tweener.running&&this.tweener.pause()},o.StopMove=function(){this.isMove=!1,this.tweener.running&&this.tweener.stop()},o.update=function(e){},t}(c)).prototype,"leftSide",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-5}}),w=t(d.prototype,"rightSide",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 5}}),b=t(d.prototype,"duration",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 3}}),y=t(d.prototype,"isMove",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),h=d))||h));o._RF.pop()}}}));

System.register("chunks:///_virtual/Countdown.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(n){var t,o,e,r,a,i,c,l,u,s;return{setters:[function(n){t=n.applyDecoratedDescriptor,o=n.inheritsLoose,e=n.initializerDefineProperty,r=n.assertThisInitialized},function(n){a=n.cclegacy,i=n._decorator,c=n.Label,l=n.Component,u=n.Vec3,s=n.tween}],execute:function(){var p,d,f,w,b;a._RF.push({},"5aa80x/yXRA2pG8/60gXYCf","Countdown",void 0);var y=i.ccclass,h=i.property;n("Countdown",(p=y("Countdown"),d=h(c),p((b=t((w=function(n){function t(){for(var t,o=arguments.length,a=new Array(o),i=0;i<o;i++)a[i]=arguments[i];return t=n.call.apply(n,[this].concat(a))||this,e(t,"countdownLabel",b,r(t)),t}o(t,n);var a=t.prototype;return a.onLoad=function(){this.play((function(){console.log("GOOOOOO!")}))},a.play=function(n){var t=this;if(this.countdownLabel){var o=["3","2","1","GO"],e=0;!function r(){if(e>=o.length)n&&n();else{var a=o[e];e++,t.countdownLabel.string=a,t.countdownLabel.node.scale=new u(0,0,0),s(t.countdownLabel.node).to(1,{scale:new u(1,1,1)},{easing:"backOut"}).call((function(){r()})).start()}}()}},t}(l)).prototype,"countdownLabel",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=w))||f));a._RF.pop()}}}));

System.register("chunks:///_virtual/DescPanel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./FadeGroup.ts","./MainGame.ts"],(function(e){var t,n,r,i,a,o,c,u,l,s,p,f,h;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,r=e.initializerDefineProperty,i=e.assertThisInitialized,a=e.asyncToGenerator,o=e.regeneratorRuntime},function(e){c=e.cclegacy,u=e._decorator,l=e.Button,s=e.EventHandler,p=e.Component},function(e){f=e.FadeGroup},function(e){h=e.MainGame}],execute:function(){var b,d,y,v,m,g,G,w,D,B,F;c._RF.push({},"a8f986Ra1lEo4r9LypeqzAo","DescPanel",void 0);var z=u.ccclass,P=u.property;e("DescPanel",(b=z("DescPanel"),d=P(f),y=P(l),v=P(Boolean),m=P({type:[s],tooltip:"全部對話結束後要呼叫的事件（可指到外部元件方法）"}),b((w=t((G=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return t=e.call.apply(e,[this].concat(a))||this,r(t,"fadeGroup",w,i(t)),r(t,"startBtn",D,i(t)),r(t,"enableDeviceMotion",B,i(t)),r(t,"onFinished",F,i(t)),t}n(t,e);var c=t.prototype;return c.onLoad=function(){this.startBtn.interactable=!0,this.startBtn.node.on(l.EventType.CLICK,this.onClickStart,this)},c.onClickStart=function(){var e=a(o().mark((function e(){var t,n=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s.emitEvents(this.onFinished),this.startBtn.interactable=!1,t=this.getComponent(f)){e.next=6;break}return console.warn("[MainGame] titlePage 上沒有掛 FadeGroup 元件"),e.abrupt("return");case 6:t.fadeOut(.5,(function(){console.log("淡出完成"),h.instance.ShowGame(),n.node.active=!1}));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t}(p)).prototype,"fadeGroup",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=t(G.prototype,"startBtn",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=t(G.prototype,"enableDeviceMotion",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),F=t(G.prototype,"onFinished",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),g=G))||g));c._RF.pop()}}}));

System.register("chunks:///_virtual/DialogPanel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AudioManager.ts"],(function(t){var e,i,n,a,r,l,o,s,u,c,p,h,y,f,g,b,T,m,d;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,a=t.assertThisInitialized,r=t.createForOfIteratorHelperLoose,l=t.asyncToGenerator,o=t.regeneratorRuntime},function(t){s=t.cclegacy,u=t._decorator,c=t.Node,p=t.Label,h=t.JsonAsset,y=t.EventHandler,f=t.Input,g=t.input,b=t.Animation,T=t.Component,m=t.resources},function(t){d=t.AudioManager}],execute:function(){var v,L,k,I,x,C,A,P,_,S,F,w,D,E,N,j,R,z,B,M,H;s._RF.push({},"8e7f4ZrfqNEIr+TG3S+t2+S","DialogPanel",void 0);var O=u.ccclass,q=u.property;t("DialogPanel",(v=O("DialogPanel"),L=q({type:c,tooltip:"全螢幕可點擊區域（通常是一個蓋滿畫面的透明節點）"}),k=q({type:p,tooltip:"顯示人物名稱的 Label"}),I=q({type:p,tooltip:"顯示對話內容的 Label（若沒有 TypingText，就用它 fallback）"}),x=q({type:c,tooltip:"放所有可演出的角色的根節點（其子節點名稱需與 JSON 的 playerNode 對上）"}),C=q({type:h,tooltip:"可直接把 Game1.json 拖進來；或留空走 resources.load 路徑"}),A=q({tooltip:"resources 路徑（若上面 jsonAsset 留空，就用這個，如：Game1）"}),P=q({tooltip:"每個字出現的毫秒間隔（fallback 打字用）"}),_=q({type:[y],tooltip:"全部對話結束後要呼叫的事件（可指到外部元件方法）"}),S=q({tooltip:"可選：若使用你現有的 TypingText，丟上來就能用；不填則自動用 Label fallback"}),v((D=e((w=function(t){function e(){for(var e,i=arguments.length,r=new Array(i),l=0;l<i;l++)r[l]=arguments[l];return e=t.call.apply(t,[this].concat(r))||this,n(e,"clickArea",D,a(e)),n(e,"nameLabel",E,a(e)),n(e,"dialogLabel",N,a(e)),n(e,"playersRoot",j,a(e)),n(e,"jsonAsset",R,a(e)),n(e,"jsonPath",z,a(e)),n(e,"typingIntervalMs",B,a(e)),n(e,"onFinished",M,a(e)),n(e,"typingTextComp",H,a(e)),e.sequence=[],e.idx=-1,e.isBusy=!1,e.typingTimer=null,e.CLIP_WALK_IN="walkIn",e.CLIP_TALK="talk",e.CLIP_IDLE="idle",e}i(e,t);var s=e.prototype;return s.onLoad=function(){this.clickArea?this.clickArea.on(f.EventType.TOUCH_START,this.onClick,this):g.on(f.EventType.TOUCH_START,this.onClick,this)},s.start=function(){var t=l(o().mark((function t(){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.loadScenario();case 2:this.idx=-1,this.nextSegment(!0);case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),s.onEnable=function(){var t;null==(t=d.Inst)||t.playBGM(0,!0,.3)},s.onDisable=function(){var t;null==(t=d.Inst)||t.stopBGM()},s.onDestroy=function(){this.clickArea?this.clickArea.off(f.EventType.TOUCH_START,this.onClick,this):g.off(f.EventType.TOUCH_START,this.onClick,this),this.stopTypingFallback()},s.loadScenario=function(){var t=l(o().mark((function t(){var e,i,n,a,l,s,u,c,p,y,f,g,b,T=this;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.jsonAsset){t.next=4;break}e=this.jsonAsset.json,t.next=7;break;case 4:return t.next=6,new Promise((function(t,e){m.load(T.jsonPath,h,(function(i,n){i?e(i):t(n.json)}))}));case 6:e=t.sent;case 7:for(i=Object.keys(e).sort((function(t,e){return Number(t)-Number(e)})),n=[],a=r(i);!(l=a()).done;)for(s=l.value,u=e[s],c=u.name,p=u.playerNode,y=u.dialog||[],f=r(y);!(g=f()).done;)b=g.value,n.push({name:c,playerNode:p,text:b});this.sequence=n;case 11:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),s.onClick=function(t){var e,i,n;!1!==this.node.active&&(this.sequence.length&&(this.isBusy||(null==(e=d.Inst)||e.playSFXOnce(1),this.typingTextComp&&this.typingTextComp.isTyping?null==(i=(n=this.typingTextComp).skip)||i.call(n):this.typingTimer?this.finishTypingFallback():this.nextSegment(!1))))},s.nextSegment=function(t){var e,i=this;if(!this.isBusy)if(this.idx++,this.idx>=this.sequence.length)y.emitEvents(this.onFinished);else{var n=this.sequence[this.idx];this.isBusy=!0,this.updateActivePlayer(n.playerNode),this.nameLabel&&(this.nameLabel.string=null!=(e=n.name)?e:"");var a=this.findPlayer(n.playerNode),r=(null==a?void 0:a.getComponent(b))||null;t&&r&&this.hasState(r,this.CLIP_WALK_IN)?(r.once(b.EventType.FINISHED,(function(){i.startTalking(n,r)}),this),r.play(this.CLIP_WALK_IN)):this.startTalking(n,r)}},s.startTalking=function(t,e){var i,n=this;e&&this.hasState(e,this.CLIP_TALK)&&e.play(this.CLIP_TALK);var a=null!=(i=t.text)?i:"";this.typingTextComp&&"function"==typeof this.typingTextComp.play?this.typingTextComp.play(a,(function(){e&&n.hasState(e,n.CLIP_IDLE)&&e.play(n.CLIP_IDLE),n.isBusy=!1})):this.playTypingFallback(a,(function(){e&&n.hasState(e,n.CLIP_IDLE)&&e.play(n.CLIP_IDLE),n.isBusy=!1}))},s.updateActivePlayer=function(t){if(this.playersRoot)for(var e,i=this.playersRoot.children,n=r(i);!(e=n()).done;){var a=e.value;a.active=a.name===t}},s.findPlayer=function(t){return this.playersRoot?this.playersRoot.getChildByName(t):null},s.hasState=function(t,e){try{return!!t.getState(e)}catch(t){return!1}},s.playTypingFallback=function(t,e){var i=this;if(this.dialogLabel){this.stopTypingFallback(),this.dialogLabel.string="";var n=Array.from(t),a=0;this.typingTimer=setInterval((function(){a>=n.length?i.finishTypingFallback(e):i.dialogLabel.string+=n[a++]}),Math.max(1,this.typingIntervalMs))}else e&&e()},s.finishTypingFallback=function(t){var e=this;if(this.dialogLabel){this.stopTypingFallback();var i=this.sequence[this.idx];null!=(null==i?void 0:i.text)&&(this.dialogLabel.string=i.text),t&&t(),setTimeout((function(){e.isBusy=!1}),.5)}},s.stopTypingFallback=function(){this.typingTimer&&(clearInterval(this.typingTimer),this.typingTimer=null)},e}(T)).prototype,"clickArea",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=e(w.prototype,"nameLabel",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=e(w.prototype,"dialogLabel",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=e(w.prototype,"playersRoot",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=e(w.prototype,"jsonAsset",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=e(w.prototype,"jsonPath",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"Game1"}}),B=e(w.prototype,"typingIntervalMs",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 18}}),M=e(w.prototype,"onFinished",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),H=e(w.prototype,"typingTextComp",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=w))||F));s._RF.pop()}}}));

System.register("chunks:///_virtual/DialogueExample.ts",["./rollupPluginModLoBabelHelpers.js","cc","./TypingText.ts"],(function(e){var t,n,i,o,r,a,l,s,c;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){r=e.cclegacy,a=e._decorator,l=e.Component},function(e){s=e.TypingText,c=e.TypingEvents}],execute:function(){var p,u,y,h,f;r._RF.push({},"e36d3is+6dKGb+6eKCxiU/3","DialogueExample",void 0);var D=a.ccclass,g=a.property;e("DialogueExample",(p=D("DialogueExample"),u=g(s),p((f=t((h=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return t=e.call.apply(e,[this].concat(r))||this,i(t,"typer",f,o(t)),t}n(t,e);var r=t.prototype;return r.start=function(){this.typer.charsPerSecond=28,this.typer.bus.on(c.LINE_DONE,this.onLineDone,this),this.typer.bus.on(c.ALL_DONE,this.onAllDone,this),this.typer.playLines(["嗨，探員。歡迎加入任務！","請握緊手機，準備開始運動吧！","<color=#FFD166>小提醒：</color> 使用 Safari 或 Chrome 效果最佳。"])},r.onLineDone=function(){},r.onAllDone=function(){},t}(l)).prototype,"typer",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=h))||y));r._RF.pop()}}}));

System.register("chunks:///_virtual/EnvCheck.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,n,i,r,o,a,s,l,c,u,p;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){o=e.cclegacy,a=e._decorator,s=e.Node,l=e.Label,c=e.Button,u=e.sys,p=e.Component}],execute:function(){var h,d,g,f,v,b,m,y,P,S,C,L,N;o._RF.push({},"1cea6lVxEhCg7XcsVvbU5NJ","EnvCheck",void 0);var w=a.ccclass,k=a.property;e("EnvCheck",(h=w("EnvCheck"),d=k({type:s}),g=k({type:l}),f=k({type:l}),v=k({type:s}),b=k({type:s}),h((P=t((y=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o))||this,i(t,"popUpNode",P,r(t)),i(t,"titleLabel",S,r(t)),i(t,"messageLabel",C,r(t)),i(t,"proceedButtonNode",L,r(t)),i(t,"targetStartPanel",N,r(t)),t.reasons=[],t}n(t,e);var o=t.prototype;return o.onLoad=function(){var e,t=this;this.targetStartPanel&&(this.targetStartPanel.active=!1);var n=this.runChecks();this.renderUI(n);var i=null==(e=this.proceedButtonNode)?void 0:e.getComponent(c);i&&(i.interactable=!0,i.node.on("click",(function(){return t.onProceed(n)})))},o.runChecks=function(){this.reasons.length=0;var e=u.isMobile||/Android|iPhone|iPad|iPod/i.test(navigator.userAgent),t=navigator.userAgent,n=(/iPad|iPhone|iPod/.test(t),/Safari/.test(t)&&!/Chrome|CriOS|EdgiOS|OPiOS/i.test(t)),i=/Chrome|CriOS/i.test(t),r=n||i,o=/FBAN|FBAV|Instagram|Line\/|Line/i.test(t),a="https:"===location.protocol||"localhost"===location.hostname,s="undefined"!=typeof window&&"ondevicemotion"in window;return e||this.reasons.push("必須使用「手機或平板」裝置。"),r||this.reasons.push("請使用「Safari」或「Chrome」瀏覽器。"),o&&this.reasons.push("請以「Safari/Chrome」開啟（避免在 LINE/FB/IG 內建瀏覽器）。"),a||this.reasons.push("請使用「HTTPS」網址（或本機環境）。"),s||this.reasons.push("此裝置/瀏覽器不支援「裝置動態 (Devicemotion)」。"),0===this.reasons.length},o.renderUI=function(e){if(e)return this.popUpNode.active=!1,this.targetStartPanel&&(this.targetStartPanel.active=!0),void console.log(e);this.popUpNode.active=!0,console.log(e),this.titleLabel&&(this.titleLabel.string=e?"環境檢查通過":"請使用建議環境");var t=e?"您的裝置看起來可以正常遊玩。\n\n":"偵測到以下問題：\n- "+this.reasons.join("\n- ");this.messageLabel&&(this.messageLabel.string=t)},o.onProceed=function(e){console.log(e),this.popUpNode.active=!1,this.targetStartPanel&&(this.targetStartPanel.active=!0)},t}(p)).prototype,"popUpNode",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=t(y.prototype,"titleLabel",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=t(y.prototype,"messageLabel",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=t(y.prototype,"proceedButtonNode",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=t(y.prototype,"targetStartPanel",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=y))||m));o._RF.pop()}}}));

System.register("chunks:///_virtual/FadeGroup.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var i,e,n,r,o,a,u,c,p;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,n=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){o=t.cclegacy,a=t._decorator,u=t.UIOpacity,c=t.tween,p=t.Component}],execute:function(){var l,s,f,y,d,h,v;o._RF.push({},"b7389kiXWxN1ov64R16vEZF","FadeGroup",void 0);var b=a.ccclass,O=a.property;t("FadeGroup",(l=b("FadeGroup"),s=O(u),f=O(Number),l((h=i((d=function(t){function i(){for(var i,e=arguments.length,o=new Array(e),a=0;a<e;a++)o[a]=arguments[a];return i=t.call.apply(t,[this].concat(o))||this,n(i,"uiOpacity",h,r(i)),n(i,"duration",v,r(i)),i}e(i,t);var o=i.prototype;return o.onLoad=function(){null===this.uiOpacity&&(this.uiOpacity=this.getComponent(u))},o.fadeIn=function(t,i){void 0===t&&(t=this.duration),c(this.uiOpacity).to(t,{opacity:255}).call((function(){i&&i()})).start()},o.fadeOut=function(t,i){void 0===t&&(t=this.duration),c(this.uiOpacity).to(t,{opacity:0}).call((function(){i&&i()})).start()},i}(p)).prototype,"uiOpacity",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=i(d.prototype,"duration",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.5}}),y=d))||y));o._RF.pop()}}}));

System.register("chunks:///_virtual/FailPanel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./MainGame.ts"],(function(t){var e,n,r,i,a,o,l,c,u;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,r=t.initializerDefineProperty,i=t.assertThisInitialized},function(t){a=t.cclegacy,o=t._decorator,l=t.Button,c=t.Component},function(t){u=t.MainGame}],execute:function(){var s,p,y,f,h;a._RF.push({},"692bdtnGytGWLjzulzUIQbO","FailPanel",void 0);var d=o.ccclass,m=o.property;t("FailPanel",(s=d("FailPanel"),p=m(l),s((h=e((f=function(t){function e(){for(var e,n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a))||this,r(e,"retryBtn",h,i(e)),e}n(e,t);var a=e.prototype;return a.start=function(){this.retryBtn.node.on(l.EventType.CLICK,this.onRetryGame,this)},a.onRetryGame=function(){u.instance.RestartGame()},a.update=function(t){},e}(c)).prototype,"retryBtn",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=f))||y));a._RF.pop()}}}));

System.register("chunks:///_virtual/FitHeightLeft.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(i){var t,e,s,n,o,r,a,h,g,l,c,p;return{setters:[function(i){t=i.applyDecoratedDescriptor,e=i.inheritsLoose,s=i.initializerDefineProperty,n=i.assertThisInitialized},function(i){o=i.cclegacy,r=i._decorator,a=i.UITransform,h=i.Vec3,g=i.Sprite,l=i.view,c=i.sys,p=i.Component}],execute:function(){var b,d,f,u,_,y,v,w,m;o._RF.push({},"19079JfJa1Kp5MHq7fAIRAK","FitHeightLeft",void 0);var P=r.ccclass,B=r.property;i("FitHeightLeft",(b=P("FitHeightLeft"),d=B({tooltip:"第一張背景（靠左起點）"}),f=B({tooltip:"第二張背景（位於 bg1 左側，作為接續）"}),u=B({tooltip:"每秒位移像素（>0 代表向右移動）"}),b((v=t((y=function(i){function t(){for(var t,e=arguments.length,o=new Array(e),r=0;r<e;r++)o[r]=arguments[r];return t=i.call.apply(i,[this].concat(o))||this,s(t,"bg1",v,n(t)),s(t,"bg2",w,n(t)),s(t,"speed",m,n(t)),t._pUI=void 0,t._s1=void 0,t._s2=void 0,t._wScaled=0,t._yBase=0,t.fitAndPlace=function(){var i=t._pUI.height,e=t._s1.spriteFrame,s=(t._s2.spriteFrame,e.originalSize.height),n=e.originalSize.width,o=i/s;t.bg1.setScale(o,o,1),t.bg2.setScale(o,o,1),t._wScaled=n*o;var r=t.bg1.getComponent(a),g=t.bg2.getComponent(a);r.anchorX=0,r.anchorY=.5,g.anchorX=0,g.anchorY=.5,t._yBase=0,t.bg1.translate(new h(0,t._yBase,0)),t.bg2.setPosition(new h(-t._wScaled,t._yBase,0))},t}e(t,i);var o=t.prototype;return o.onLoad=function(){this._pUI=this.node.getComponent(a),this._s1=this.bg1.getComponent(g),this._s2=this.bg2.getComponent(g),this.fitAndPlace(),l.on("design-resolution-changed",this.fitAndPlace,this),c.isBrowser&&window.addEventListener("resize",this.fitAndPlace.bind(this))},o.onDestroy=function(){l.off("design-resolution-changed",this.fitAndPlace,this),c.isBrowser&&window.removeEventListener("resize",this.fitAndPlace.bind(this))},o.update=function(i){var t=this.speed*i;this.bg1.setPosition(this.bg1.position.x+t,this._yBase),this.bg2.setPosition(this.bg2.position.x+t,this._yBase);var e=this._pUI.width;if(this.bg1.position.x>=e){this.bg1.setPosition(this.bg2.position.x-this._wScaled,this._yBase);var s=[this.bg2,this.bg1];this.bg1=s[0],this.bg2=s[1]}if(this.bg2.position.x>=e){this.bg2.setPosition(this.bg1.position.x-this._wScaled,this._yBase);var n=[this.bg2,this.bg1];this.bg1=n[0],this.bg2=n[1]}},t}(p)).prototype,"bg1",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),w=t(y.prototype,"bg2",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),m=t(y.prototype,"speed",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 120}}),_=y))||_));o._RF.pop()}}}));

System.register("chunks:///_virtual/GamePanel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./MainGame.ts","./AudioManager.ts","./BGScroller.ts"],(function(e){var t,i,n,o,r,s,a,l,u,c,h,p,d,m,g,f,b,v,y;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,o=e.assertThisInitialized,r=e.asyncToGenerator,s=e.regeneratorRuntime},function(e){a=e.cclegacy,l=e._decorator,u=e.Sprite,c=e.Label,h=e.Node,p=e.SpriteFrame,d=e.Component,m=e.Vec3,g=e.tween,f=e.sys},function(e){b=e.MainGame},function(e){v=e.AudioManager},function(e){y=e.BGScroller}],execute:function(){var w,L,P,M,S,I,x,G,D,T,k,F,z,B,E,O,R,q,A,W,_;a._RF.push({},"45d49rPkZpCUb3+vvEPIhdb","GamePanel",void 0);var C=l.ccclass,X=l.property;e("GamePanel",(w=C("GamePanel"),L=X({type:u}),P=X({type:c}),M=X({type:h}),S=X({type:h,tooltip:"點擊以開始的UI（授權會綁在此按鈕）"}),I=X(c),x=X(y),G=X(u),D=X([p]),T=X({type:c}),w((z=t((F=function(e){function t(){for(var t,i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return t=e.call.apply(e,[this].concat(r))||this,n(t,"energyProgress",z,o(t)),n(t,"timerLabel",B,o(t)),n(t,"horse",E,o(t)),n(t,"readyPanel",O,o(t)),n(t,"countdownLabel",R,o(t)),n(t,"bgscroll",q,o(t)),n(t,"horseSprite",A,o(t)),n(t,"horseImages",W,o(t)),t.horseImageIndex=0,t.timeLeft=30,t.isPlaying=!1,t.progress=0,t.lastShakeAt=0,t.isWillFinish=!1,n(t,"logLabel",_,o(t)),t.motionBound=!1,t.onDeviceMotion=function(e){if(t.isPlaying){var i=e.accelerationIncludingGravity;if(i){var n=Math.abs(i.x||0)+Math.abs(i.y||0)+Math.abs(i.z||0),o=performance.now();n>18&&o-t.lastShakeAt>60&&(t.lastShakeAt=o,t.updateProgress(t.progress+.01),t.updateTime=Math.max(.1,t.updateTime-.02))}}},t.updateTime=1,t.countTimer=0,t}i(t,e);var a=t.prototype;return a.setLog=function(e){this.logLabel&&(this.logLabel.string=e)},a.onEnable=function(){this.bindMotionListener()},a.onDisable=function(){this.unbindMotionListener()},a.bindMotionListener=function(){this.motionBound||"undefined"!=typeof window&&"ondevicemotion"in window&&(window.addEventListener("devicemotion",this.onDeviceMotion,{passive:!0}),this.motionBound=!0)},a.unbindMotionListener=function(){this.motionBound&&(window.removeEventListener("devicemotion",this.onDeviceMotion),this.motionBound=!1)},a.onLoad=function(){this.updateProgress(0),this.timerLabel&&(this.timerLabel.string="30")},a.onClickStart=function(){var e=r(s().mark((function e(){var t=this;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.enableMotion();case 2:this.readyPanel.active=!0,this.ReadyTween((function(){t.startGame()}));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),a.enableMotion=function(){var e=r(s().mark((function e(){var t,i,n,o,r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=f.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent),i=globalThis.DeviceMotionEvent,n=globalThis.DeviceOrientationEvent,e.prev=3,!t){e.next=17;break}if(!i||"function"!=typeof i.requestPermission){e.next=11;break}return this.setLog("Requesting DeviceMotion permission…"),e.next=9,i.requestPermission();case 9:o=e.sent,this.setLog("DeviceMotion: "+o);case 11:if(!n||"function"!=typeof n.requestPermission){e.next=17;break}return this.setLog("Requesting DeviceOrientation permission…"),e.next=15,n.requestPermission();case 15:r=e.sent,this.setLog("DeviceOrientation: "+r);case 17:e.next=23;break;case 19:e.prev=19,e.t0=e.catch(3),console.warn("Motion permission request error:",e.t0),this.setLog("Permission error, check Safari setting / HTTPS");case 23:"undefined"!=typeof window&&"ondevicemotion"in window?(this.setLog("Binding devicemotion…"),window.addEventListener("devicemotion",this.onDeviceMotion,{passive:!0})):this.setLog("devicemotion not supported in this environment.");case 24:case"end":return e.stop()}}),e,this,[[3,19]])})));return function(){return e.apply(this,arguments)}}(),a.ReadyTween=function(e){var t,i=this;if(this.countdownLabel){var n=["3","2","1","GO"],o=0;null==(t=v.Inst)||t.playSFXOnce(2);!function t(){if(o>=n.length)e&&e();else{var r=n[o];o++,i.countdownLabel.string=r,i.countdownLabel.node.scale=new m(0,0,0),g(i.countdownLabel.node).to(.5,{scale:new m(1,1,1)},{easing:"backOut"}).call((function(){t()})).start()}}()}},a.startGame=function(){var e;null==(e=v.Inst)||e.playSFXOnce(4),this.bgscroll.StartMove(),this.isWillFinish=!1,this.readyPanel.active=!1,this.isPlaying=!0,this.timeLeft=30,this.updateProgress(0),this.timerLabel&&(this.timerLabel.string="30"),this.readyPanel&&(this.readyPanel.active=!1)},a.endGame=function(){this.bgscroll.StopMove(),this.isPlaying=!1,"undefined"!=typeof window&&window.removeEventListener("devicemotion",this.onDeviceMotion),b.instance.ShowEnd(this.progress>=1)},a.update=function(e){if(this.isPlaying){var t;if((this.countTimer+=e)>this.updateTime&&(this.countTimer=0,this.updateFrame()),this.timeLeft-=e,this.timerLabel&&(this.timerLabel.string=Math.max(0,Math.ceil(this.timeLeft)).toString()),this.timeLeft<=3&&!this.isWillFinish)this.isWillFinish=!0,null==(t=v.Inst)||t.playSFXOnce(3);this.timeLeft<=0&&this.endGame()}},a.updateFrame=function(){this.horseSprite&&(this.horseSprite.spriteFrame=this.horseImages[this.horseImageIndex],this.horseImageIndex=(this.horseImageIndex+1)%this.horseImages.length)},a.updateProgress=function(e){this.progress=Math.max(0,Math.min(1,e)),this.energyProgress&&(this.energyProgress.fillRange=this.progress),this.progress>=1&&this.endGame()},t}(d)).prototype,"energyProgress",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=t(F.prototype,"timerLabel",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=t(F.prototype,"horse",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=t(F.prototype,"readyPanel",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=t(F.prototype,"countdownLabel",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=t(F.prototype,"bgscroll",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),A=t(F.prototype,"horseSprite",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),W=t(F.prototype,"horseImages",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),_=t(F.prototype,"logLabel",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=F))||k));a._RF.pop()}}}));

System.register("chunks:///_virtual/LanguageData.ts",["cc"],(function(e){var n,a;return{setters:[function(e){n=e.cclegacy,a=e.director}],execute:function(){e({init:t,t:function(e){var n=window;if(!n.languages)return e;for(var a=e.split("."),t=n.languages[r],u=0;u<a.length;u++)if(!(t=t[a[u]]))return"";return t||""},updateSceneRenderers:u}),n._RF.push({},"b3f01X4Ik5LEbIPKXZr3JWD","LanguageData",void 0);var r=e("_language","zh");e("ready",!1);function t(n){e("ready",!0),r=e("_language",n)}function u(){for(var e=a.getScene().children,n=[],r=0;r<e.length;++r){var t=e[r].getComponentsInChildren("LocalizedLabel");Array.prototype.push.apply(n,t)}for(var u=0;u<n.length;++u){var i=n[u];i.node.active&&i.updateLabel()}for(var o=[],g=0;g<e.length;++g){var c=e[g].getComponentsInChildren("LocalizedSprite");Array.prototype.push.apply(o,c)}for(var l=0;l<o.length;++l){var p=o[l];p.node.active&&p.updateSprite()}}window._languageData={get language(){return r},init:function(e){t(e)},updateSceneRenderers:function(){u()}},n._RF.pop()}}}));

System.register("chunks:///_virtual/LocalizedLabel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./LanguageData.ts"],(function(e){var t,i,r,n,o,a,l,c,s,u,p;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,r=e.initializerDefineProperty,n=e.assertThisInitialized,o=e.createClass},function(e){a=e.cclegacy,l=e._decorator,c=e.Component},function(e){s=e.ready,u=e.init,p=e.t}],execute:function(){var y,d,b,f,h,L;a._RF.push({},"edf98QH2D1AUoCrtQlbxFrU","LocalizedLabel",void 0);var g=l.ccclass,v=l.property,k=l.executeInEditMode;e("LocalizedLabel",(y=g("LocalizedLabel"),d=v({visible:!1}),b=v({displayName:"Key",visible:!0}),y(f=k((L=t((h=function(e){function t(){for(var t,i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return(t=e.call.apply(e,[this].concat(o))||this).label=null,r(t,"key",L,n(t)),t}i(t,e);var a=t.prototype;return a.onLoad=function(){s||u("zh"),this.fetchRender()},a.fetchRender=function(){var e=this.getComponent("cc.Label");if(e)return this.label=e,void this.updateLabel()},a.updateLabel=function(){this.label&&(this.label.string=p(this.key))},o(t,[{key:"_key",get:function(){return this.key},set:function(e){this.updateLabel(),this.key=e}}]),t}(c)).prototype,"key",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),t(h.prototype,"_key",[b],Object.getOwnPropertyDescriptor(h.prototype,"_key"),h.prototype),f=h))||f)||f));a._RF.pop()}}}));

System.register("chunks:///_virtual/LocalizedSprite.ts",["./rollupPluginModLoBabelHelpers.js","cc","./LanguageData.ts"],(function(e){var t,i,r,n,a,o,p,s,c,u,l;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.initializerDefineProperty,r=e.inheritsLoose,n=e.assertThisInitialized},function(e){a=e.cclegacy,o=e._decorator,p=e.SpriteFrame,s=e.Component},function(e){c=e.ready,u=e.init,l=e._language}],execute:function(){var f,h,d,g,y,z,L,m,b,v,S;a._RF.push({},"c05c25C4xNAupWYMB93tIzp","LocalizedSprite",void 0);var F=o.ccclass,_=o.property,w=o.executeInEditMode,D=(f=F("LocalizedSpriteItem"),h=_({type:p}),f((y=t((g=function(){i(this,"language",y,this),i(this,"spriteFrame",z,this)}).prototype,"language",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"zh"}}),z=t(g.prototype,"spriteFrame",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=g))||d);e("LocalizedSprite",(L=F("LocalizedSprite"),m=_({type:D}),L(b=w((S=t((v=function(e){function t(){for(var t,r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(t=e.call.apply(e,[this].concat(a))||this).sprite=null,i(t,"spriteList",S,n(t)),t}r(t,e);var a=t.prototype;return a.onLoad=function(){c||u("zh"),this.fetchRender()},a.fetchRender=function(){var e=this.getComponent("cc.Sprite");if(e)return this.sprite=e,void this.updateSprite()},a.updateSprite=function(){for(var e=0;e<this.spriteList.length;e++){var t=this.spriteList[e];if(t.language===l){this.sprite.spriteFrame=t.spriteFrame;break}}},t}(s)).prototype,"spriteList",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),b=v))||b)||b));a._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./BGScroller.ts","./EnvCheck.ts","./MainGame.ts","./AudioManager.ts","./DescPanel.ts","./DialogPanel.ts","./FailPanel.ts","./GamePanel.ts","./TitlePanel.ts","./AccelExample.ts","./Countdown.ts","./StateMachine.ts","./UseState.ts","./DialogueExample.ts","./TypingText.ts","./FadeGroup.ts","./FitHeightLeft.ts","./LanguageData.ts","./LocalizedLabel.ts","./LocalizedSprite.ts"],(function(){return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/MainGame.ts",["./rollupPluginModLoBabelHelpers.js","cc","./FadeGroup.ts","./AudioManager.ts"],(function(e){var t,n,a,i,r,o,c,l,s,u,g;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,a=e.initializerDefineProperty,i=e.assertThisInitialized,r=e.createClass},function(e){o=e.cclegacy,c=e._decorator,l=e.Node,s=e.Component},function(e){u=e.FadeGroup},function(e){g=e.AudioManager}],execute:function(){var f,p,h,P,m,y,d,v,b,w,G,M,S,_,z,F;o._RF.push({},"f6f104OsZtKtpZrrcDM1Sn3","MainGame",void 0);var C=c.ccclass,D=c.property;e("MainGame",(f=C("MainGame"),p=D(l),h=D(l),P=D(l),m=D(l),y=D(l),d=D(l),f(((F=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t=e.call.apply(e,[this].concat(r))||this,a(t,"titlePage",w,i(t)),a(t,"storyPage",G,i(t)),a(t,"descPage",M,i(t)),a(t,"gamePage",S,i(t)),a(t,"successPage",_,i(t)),a(t,"failPage",z,i(t)),t}n(t,e);var o=t.prototype;return o.onLoad=function(){t._instance&&t._instance!==this?this.node.destroy():(t._instance=this,this.titlePage?this.titlePage.active=!0:console.warn("[MainGame] titlePage 未指定"))},o.onClickStart=function(){var e,t=this;null==(e=g.Inst)||e.playSFXOnce(0);var n=this.titlePage.getComponent(u);n?n.fadeOut(.5,(function(){console.log("淡出完成"),t.storyPage.active=!0,t.titlePage.active=!1})):console.warn("[MainGame] titlePage 上沒有掛 FadeGroup 元件")},o.ShowDesc=function(){this.storyPage.active=!1,this.descPage.active=!0,this.descPage.getComponent(u).fadeIn(2)},o.ShowGame=function(){this.gamePage.active=!0},o.ShowEnd=function(e){var t,n;(this.gamePage.active=!1,this.successPage.active=e,this.failPage.active=!e,e)?null==(t=g.Inst)||t.playSFXOnce(5):null==(n=g.Inst)||n.playSFXOnce(6)},o.RestartGame=function(){this.successPage.active=!1,this.failPage.active=!1,this.ShowGame()},r(t,null,[{key:"instance",get:function(){return this._instance||console.warn("MainGame 還沒有被綁定到 Node 上！"),this._instance}}]),t}(s))._instance=null,w=t((b=F).prototype,"titlePage",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=t(b.prototype,"storyPage",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=t(b.prototype,"descPage",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=t(b.prototype,"gamePage",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=t(b.prototype,"successPage",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=t(b.prototype,"failPage",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=b))||v));o._RF.pop()}}}));

System.register("chunks:///_virtual/StateMachine.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,n,r,i;return{setters:[function(t){e=t.extends,n=t.createClass},function(t){r=t.cclegacy,i=t.EventTarget}],execute:function(){r._RF.push({},"ab1bdUIQEdBBZrTJI29iymH","StateMachine",void 0),t("StateMachine",function(){function t(){this._states=new Map,this._current=null,this._events=new i}var r=t.prototype;return r._ek=function(t,e){return String(t)+"|"+e},r.hasState=function(t){return this._states.has(t)},r.addState=function(t,n){return void 0===n&&(n={}),this._states.set(t,e({name:t},n)),this},r.removeState=function(t){return this._states.delete(t)},r.changeState=function(t,e){if(!this._states.has(t))return console.warn('[StateMachine] changeState fail: state "'+String(t)+'" not found.'),!1;var n=this._current;if(n===t)return!1;if(null!==n){var r=this._states.get(n);try{null==r.onExit||r.onExit(t,e)}catch(t){console.error("[StateMachine] onExit error:",t)}this._emit(n,"exit",{prev:n,curr:t,payload:e})}this._current=t;var i=this._states.get(t);try{null==i.onEnter||i.onEnter(n,e)}catch(t){console.error("[StateMachine] onEnter error:",t)}return this._emit(t,"enter",{prev:n,curr:t,payload:e}),this._emit(t,"change",{prev:n,curr:t,payload:e}),this._emit("*","change",{prev:n,curr:t,payload:e}),!0},r.update=function(t){if(null!==this._current){var e=this._states.get(this._current);try{null==e||null==e.onUpdate||e.onUpdate(t)}catch(t){console.error("[StateMachine] onUpdate error:",t)}this._emit(this._current,"update",{prev:this._current,curr:this._current,dt:t})}},r.on=function(t,e,n,r){this._events.on(this._ek(t,e),n,r)},r.off=function(t,e,n,r){this._events.off(this._ek(t,e),n,r)},r.reset=function(){this._states.clear(),this._current=null,this._events=new i},r._emit=function(t,e,n){this._events.emit(this._ek(t,e),n)},n(t,[{key:"current",get:function(){return this._current}}],[{key:"inst",get:function(){return this._inst||(this._inst=new t),this._inst}}]),t}())._inst=null,r._RF.pop()}}}));

System.register("chunks:///_virtual/TitlePanel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./MainGame.ts"],(function(t){var n,e,i,r,a,o,c,l,s;return{setters:[function(t){n=t.applyDecoratedDescriptor,e=t.inheritsLoose,i=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){a=t.cclegacy,o=t._decorator,c=t.Button,l=t.Component},function(t){s=t.MainGame}],execute:function(){var u,p,f,h,y;a._RF.push({},"143f3AfTABFG6UeK++R33It","TitlePanel",void 0);var v=o.ccclass,B=o.property;t("TitlePanel",(u=v("TitlePanel"),p=B(c),u((y=n((h=function(t){function n(){for(var n,e=arguments.length,a=new Array(e),o=0;o<e;o++)a[o]=arguments[o];return n=t.call.apply(t,[this].concat(a))||this,i(n,"startBtn",y,r(n)),n}e(n,t);var a=n.prototype;return a.start=function(){this.init()},a.init=function(){this.startBtn&&(this.startBtn.node.on(c.EventType.CLICK,this.onClickStart,this),this.startBtn.interactable=!0)},a.update=function(t){},a.onClickStart=function(){s.instance.onClickStart()},n}(l)).prototype,"startBtn",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=h))||f));a._RF.pop()}}}));

System.register("chunks:///_virtual/TypingText.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,i,n,r,s,a,u,o,l,c,p,h,f,b;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,r=e.assertThisInitialized,s=e.asyncToGenerator,a=e.regeneratorRuntime},function(e){u=e.cclegacy,o=e._decorator,l=e.Label,c=e.RichText,p=e.EventTarget,h=e.input,f=e.Input,b=e.Component}],execute:function(){var _,T,g,x,y,v,m,k,E,L,P,d,w,z,D;u._RF.push({},"ed359p4WAFEbasM6V5oA0QS","TypingText",void 0);var M=o.ccclass,A=o.property,N=e("TypingEvents",{LINE_DONE:"LINE_DONE",ALL_DONE:"ALL_DONE"});e("TypingText",(_=M("TypingText"),T=A({tooltip:"每秒顯示幾個字（不含標籤）"}),g=A({tooltip:"是否啟用標點停頓（，。！？、…）"}),x=A({tooltip:"逗號類停頓（毫秒）"}),y=A({tooltip:"句號類停頓（毫秒）"}),v=A(l),m=A(c),_((L=t((E=function(e){function t(){for(var t,i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return t=e.call.apply(e,[this].concat(s))||this,n(t,"charsPerSecond",L,r(t)),n(t,"punctuationPause",P,r(t)),n(t,"commaPauseMs",d,r(t)),n(t,"periodPauseMs",w,r(t)),n(t,"label",z,r(t)),n(t,"richText",D,r(t)),t.bus=new p,t._queue=[],t._playing=!1,t._skip=!1,t}i(t,e);var u=t.prototype;return u.playLines=function(e){var t;(t=this._queue).push.apply(t,e),this._playing||this._next()},u.skipCurrent=function(){this._skip=!0},u.stop=function(){this._queue.length=0,this._playing=!1},u.onEnable=function(){h.on(f.EventType.TOUCH_START,this.onTap,this)},u.onDisable=function(){h.off(f.EventType.TOUCH_START,this.onTap,this)},u.clearText=function(){this.label&&(this.label.string=""),this.richText&&(this.richText.string="")},u.onTap=function(){this._skip=!0},u._next=function(){var e=this,t=this._queue.shift();if(null==t)return this.bus.emit(N.ALL_DONE),void(this._playing=!1);this._playing=!0,this._skip=!1,this._typeLine(t).then((function(){e.bus.emit(N.LINE_DONE),e._next()}))},u._typeLine=function(){var e=s(a().mark((function e(t){var i,n,r,s,u,o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._setText(""),i=Math.max(1,this.charsPerSecond),n=1e3/i,r=this._tokenizeRich(t),s=0;case 5:if(!(s<=r.visible.length)){e.next=28;break}if(!this._skip){e.next=11;break}return this._setText(r.slices[r.slices.length-1]),e.next=10,this._sleep(0);case 10:return e.abrupt("break",28);case 11:if(u=this._richSlice(r,s),this._setText(u),s!==r.visible.length){e.next=15;break}return e.abrupt("break",28);case 15:return o=r.visible[s],s++,e.next=19,this._sleep(n);case 19:if(!this.punctuationPause){e.next=26;break}if(!/[，、；,]/.test(o)){e.next=23;break}return e.next=23,this._sleep(this.commaPauseMs);case 23:if(!/[。！？!?…]/.test(o)){e.next=26;break}return e.next=26,this._sleep(this.periodPauseMs);case 26:e.next=5;break;case 28:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),u._tokenizeRich=function(e){for(var t=[],i=[],n=!1,r="",s=Array.from(e),a=0;a<s.length;a++){var u=s[a];"<"!==u?">"===u&&n?(n=!1,r+=u):n?r+=u:(r+=u,t.push(u),i.push(r)):(n=!0,r+=u)}return 0===t.length&&i.push(r),{visible:t,slices:i,raw:e}},u._richSlice=function(e,t){var i;if(t<=0)return"";var n=Math.min(t,e.slices.length);return null!=(i=e.slices[n-1])?i:""},u._setText=function(e){this.label&&(this.label.string=e),this.richText&&(this.richText.string=e)},u._sleep=function(e){return new Promise((function(t){return setTimeout(t,e)}))},t}(b)).prototype,"charsPerSecond",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 24}}),P=t(E.prototype,"punctuationPause",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),d=t(E.prototype,"commaPauseMs",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 120}}),w=t(E.prototype,"periodPauseMs",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 220}}),z=t(E.prototype,"label",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=t(E.prototype,"richText",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=E))||k));u._RF.pop()}}}));

System.register("chunks:///_virtual/UseState.ts",["./rollupPluginModLoBabelHelpers.js","cc","./StateMachine.ts"],(function(t){var e,n,o,s,c,i,r,a;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,o=t._decorator,s=t.input,c=t.Input,i=t.KeyCode,r=t.Component},function(t){a=t.StateMachine}],execute:function(){var u;n._RF.push({},"7fe6c0fOxdNzL/GKYPDWXf5","UseState",void 0);var f=o.ccclass;o.property,t("UseState",f("UseState")(u=function(t){function n(){for(var e,n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return(e=t.call.apply(t,[this].concat(o))||this).fsm=a.inst,e}e(n,t);var o=n.prototype;return o.start=function(){this.fsm.addState("Idle",{onEnter:function(t){console.log("Enter Idle from",t)},onUpdate:function(t){},onExit:function(t){console.log("Exit Idle to",t)}}),this.fsm.addState("Run",{onEnter:function(){}});this.fsm.on("Run","enter",(function(t){console.log("[Run enter]",t.prev,"->",t.curr)})),this.fsm.on("*","change",(function(t){console.log("[CHANGE] "+t.prev+" -> "+t.curr,t.payload)})),s.on(c.EventType.KEY_UP,this.onKeyUp,this)},o.update=function(t){this.fsm.changeState("Idle")},o.onKeyDown=function(t){switch(t.keyCode){case i.KEY_A:console.log("Press a key")}},o.onKeyUp=function(t){switch(t.keyCode){case i.KEY_A:this.fsm.changeState("Run",{speed:5})}},n}(r))||u);n._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});